task stopProductionContainer (type: Exec) {
    ignoreExitValue true
    commandLine 'sudo', 'docker', 'stop', "issumy-production"
}

task removeProductionContainer (type: Exec) {
    ignoreExitValue true
    commandLine 'sudo', 'docker', 'rm', "issumy-production"
}
removeProductionContainer.dependsOn stopProductionContainer

task deployProduction (type: Exec) {
    def env = System.getenv()
    commandLine 'sudo', 'docker', 'run', '-d', '-p', '8080:8080', '--name', "issumy-production", "localhost:5000/inventage/issumy:$env.APP_VERSION"
}
deployProduction.dependsOn removeProductionContainer

task wrapper(type: Wrapper) {
    gradleVersion = '1.10'
}